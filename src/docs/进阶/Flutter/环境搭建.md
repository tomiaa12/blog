# Flutter ç¯å¢ƒæ­å»º

## Windows å®‰è£…

### å®‰è£… Flutter

[Flutter sdk](https://docs.flutter.dev/install/archive?utm_source=chatgpt.com)

### powerShell æ·»åŠ ç¯å¢ƒå˜é‡

```sh
[System.Environment]::SetEnvironmentVariable('Path', $env:Path + ";H:\flutter\bin", [System.EnvironmentVariableTarget]::User)
```

### ä¸‹è½½ Android Studioï¼ˆå®˜æ–¹ï¼‰

Windows ä¸Š Android SDK æ²¡æœ‰å•ç‹¬å®˜æ–¹ä¸‹è½½åŒ…ï¼ˆzip åŒ…å·²ç»è¢« Google åºŸå¼ƒï¼‰,å¿…é¡»é€šè¿‡ Android Studio æ¥ä¸‹è½½ SDKã€‚

[å®˜æ–¹åœ°å€](https://developer.android.com/studio)

å³ä¸Šè§’ More Actions

è¿›å…¥ SDK Manager

åœ¨ SDK Platforms å‹¾é€‰ï¼š
âœ”ï¸ Android 14ï¼ˆæˆ– Android 13 éƒ½è¡Œï¼‰

åœ¨ SDK Tools å‹¾é€‰ï¼š
âœ”ï¸ Android SDK Platform-Tools
âœ”ï¸ Android SDK Build-Tools
âœ”ï¸ Android SDK Command-line Tools
âœ”ï¸ Android Emulatorï¼ˆå¯é€‰ï¼‰

ç‚¹å‡» OK ä¸‹è½½ã€‚

![android-studio-sdk-manager](./imgs/android-studio-sdk-manager.png)
![android-studio-sdk-manager](./imgs/android-studio-sdk-manager-1.png)

```sh
C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk
```

ä½ æ‰“å¼€ Android Studio â†’ File â†’ Settings â†’ Appearance & Behavior â†’ System Settings â†’ Android SDK

è¿™é‡Œèƒ½çœ‹åˆ° SDK è·¯å¾„ã€‚

### æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆéå¸¸é‡è¦ï¼‰

è¿›å…¥ç³»ç»Ÿ â†’ ç¯å¢ƒå˜é‡ â†’ PATH â†’ æ·»åŠ ï¼š

- `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk\platform-tools`
- `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk\cmdline-tools\latest\bin`

æµ‹è¯•å®‰å“ SDK æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```sh
adb --version
```

### è®© Flutter è¯†åˆ« SDK

```sh
flutter doctor --android-licenses
```

![flutter-doctor](./imgs/flutter-doctor.png)

æœ€åå†è¿è¡Œï¼š

```sh
flutter doctor
```

![flutter-doctor](./imgs/flutter-doctor-1.png)

### fvm ç®¡ç† Flutter ç‰ˆæœ¬

```sh
# å®‰è£… fvm (å¦‚æœæœªå®‰è£…)
dart pub global activate fvm
# å®‰è£…æŸä¸ªç‰ˆæœ¬ eg. 3.3.0 ï¼ˆç¤ºä¾‹ï¼‰
fvm install 3.3.0
fvm use 3.3.0
# ç„¶åç”¨ fvm flutter ä»£æ›¿ flutter
fvm flutter pub get
fvm flutter run
```

- æŸ¥çœ‹ fvm å·²å®‰è£…çš„ Flutter ç‰ˆæœ¬

```sh
fvm list

# 3.7.12 (global)
# 3.3.10
# 2.10.5
```

- æŸ¥çœ‹å½“å‰é¡¹ç›®æ­£åœ¨ä½¿ç”¨å“ªä¸ª Flutter ç‰ˆæœ¬

```sh
fvm flutter --version
```



## é•œåƒæº

[é•œåƒæº](https://docs.flutter.cn/community/china/)

- è®¾ç½®
```sh
$env:PUB_HOSTED_URL="https://pub.flutter-io.cn"
$env:FLUTTER_STORAGE_BASE_URL="https://storage.flutter-io.cn"
```

- æŸ¥çœ‹

```sh
echo $env:PUB_HOSTED_URL
```

- åˆ é™¤

```sh
Remove-Item $env:PUB_HOSTED_URL
```


## vscode è°ƒè¯•æ–­ç‚¹

[åœ°å€](https://blog.csdn.net/Sakuramissing/article/details/135341873)

## Mac å®‰è£… Flutter

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ åœ¨ macOS ä¸Šå®Œæ•´å®‰è£… Flutter 3.7.12 å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ä»£ç†é…ç½®ã€FVM ç‰ˆæœ¬ç®¡ç†ã€Android Studio å’Œ Xcode é…ç½®ã€‚

:::tip å‰ç½®è¦æ±‚
- macOS ç³»ç»Ÿ
- å·²å®‰è£… Homebrew
- å·²å®‰è£…å¹¶è¿è¡Œ ClashXï¼ˆæˆ–å…¶ä»–ä»£ç†å·¥å…·ï¼‰
- ä»£ç†ç«¯å£ä¸º 7890ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
:::

### é…ç½®ä»£ç†ç¯å¢ƒ

é¦–å…ˆé…ç½®ä»£ç†ï¼Œä»¥ä¾¿é¡ºåˆ©ä¸‹è½½ Flutter ç›¸å…³ä¾èµ–ã€‚

#### è®¾ç½®ç»ˆç«¯ä»£ç†

```bash
# é…ç½®ä»£ç†ç¯å¢ƒå˜é‡
cat >> ~/.zshrc << 'EOF'

# ClashX ä»£ç†é…ç½®
export https_proxy=http://127.0.0.1:7890
export http_proxy=http://127.0.0.1:7890
export all_proxy=socks5://127.0.0.1:7890
EOF

# é‡æ–°åŠ è½½é…ç½®
source ~/.zshrc
```

#### é…ç½® Git ä»£ç†

```bash
# é…ç½® Git ä½¿ç”¨ä»£ç†
git config --global http.proxy http://127.0.0.1:7890
git config --global https.proxy http://127.0.0.1:7890
```

:::warning æ³¨æ„
æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯éƒ½éœ€è¦ä»£ç†é…ç½®ç”Ÿæ•ˆï¼Œå»ºè®®å°†é…ç½®æ·»åŠ åˆ° `~/.zshrc` æ–‡ä»¶ä¸­ã€‚
:::

### å®‰è£… FVM

FVM (Flutter Version Management) ç”¨äºç®¡ç†å¤šä¸ª Flutter ç‰ˆæœ¬ã€‚

#### å®‰è£…æ­¥éª¤

```bash
# ç¦ç”¨ Homebrew è‡ªåŠ¨æ›´æ–°
export HOMEBREW_NO_AUTO_UPDATE=1

# æ·»åŠ  fvm tap å¹¶å®‰è£…
brew tap leoafarias/fvm
brew install fvm

# éªŒè¯å®‰è£…
fvm --version
```

### ä½¿ç”¨ FVM å®‰è£… Flutter 3.7.12

#### å®‰è£…å¹¶è®¾ç½®é»˜è®¤ç‰ˆæœ¬

```bash
# å®‰è£… Flutter 3.7.12ï¼ˆä¼šé€šè¿‡ä»£ç†ä¸‹è½½ï¼‰
fvm install 3.7.12

# è®¾ç½®å…¨å±€é»˜è®¤ç‰ˆæœ¬
fvm global 3.7.12

# æ·»åŠ  FVM Flutter åˆ° PATH
echo 'export PATH="$HOME/fvm/default/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc

# éªŒè¯ Flutter ç‰ˆæœ¬
flutter --version
```

### é…ç½® Xcode

#### è®¾ç½® Xcode å‘½ä»¤è¡Œå·¥å…·

```bash
# è®¾ç½® Xcode å‘½ä»¤è¡Œå·¥å…·è·¯å¾„
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer

# åŒæ„ Xcode è®¸å¯åè®®
sudo xcodebuild -license accept

# å®‰è£… CocoaPods
sudo gem install cocoapods

# éªŒè¯å®‰è£…
pod --version
```

### å®‰è£… Android Studio

#### ä½¿ç”¨ Homebrew å®‰è£…

```bash
# ç¦ç”¨è‡ªåŠ¨æ›´æ–°å¹¶å®‰è£…
export HOMEBREW_NO_AUTO_UPDATE=1
brew install --cask android-studio
```

#### é¦–æ¬¡å¯åŠ¨é…ç½®

1. æ‰“å¼€ Android Studio
2. é€‰æ‹© **"Standard"** å®‰è£…ç±»å‹
3. é…ç½®ä»£ç†ï¼š
   - ç‚¹å‡» **Configure** â†’ **Settings**
   - **Appearance & Behavior** â†’ **System Settings** â†’ **HTTP Proxy**
   - é€‰æ‹© **"Manual proxy configuration"**
   - **HTTP Proxy**: `127.0.0.1`
   - **Port**: `7890`
   - å‹¾é€‰ **"Use secure connection"**
   - ç‚¹å‡» **"Check connection"** æµ‹è¯•
   - ç‚¹å‡» **OK**

### é…ç½® Android SDK

åœ¨ Android Studio ä¸­é…ç½®æ‰€éœ€çš„ SDK ç»„ä»¶ã€‚

#### SDK Platforms

1. æ‰“å¼€ **Settings/Preferences** â†’ **Appearance & Behavior** â†’ **System Settings** â†’ **Android SDK**
2. åœ¨ **SDK Platforms** æ ‡ç­¾é¡µï¼Œå‹¾é€‰ï¼š
   - â˜‘ï¸ Android 13.0 (Tiramisu) API Level 33
   - â˜‘ï¸ Android 12.0 (S) API Level 31

#### SDK Tools

åœ¨ **SDK Tools** æ ‡ç­¾é¡µï¼Œå‹¾é€‰ï¼š
- â˜‘ï¸ Android SDK Build-Tools
- â˜‘ï¸ Android SDK Command-line Tools (latest)
- â˜‘ï¸ Android Emulator
- â˜‘ï¸ Android SDK Platform-Tools
- â˜‘ï¸ Intel x86 Emulator Accelerator (HAXM installer) - å¦‚æœæ˜¯ Intel Mac

ç‚¹å‡» **Apply** å¼€å§‹ä¸‹è½½ï¼ˆä¼šä½¿ç”¨ä»£ç†ï¼‰

### é…ç½®ç¯å¢ƒå˜é‡

#### æ·»åŠ  Android SDK è·¯å¾„

```bash
# æ·»åŠ  Android SDK ç¯å¢ƒå˜é‡
cat >> ~/.zshrc << 'EOF'

# Android SDK
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin
EOF

# é‡æ–°åŠ è½½é…ç½®
source ~/.zshrc

# éªŒè¯è·¯å¾„
echo $ANDROID_HOME
adb version
```

### é…ç½® Gradle ä»£ç†

Gradle éœ€è¦å•ç‹¬é…ç½®ä»£ç†ä»¥ä¸‹è½½ä¾èµ–ã€‚

```bash
# åˆ›å»º Gradle å…¨å±€é…ç½®ç›®å½•
mkdir -p ~/.gradle

# é…ç½® Gradle ä»£ç†
cat > ~/.gradle/gradle.properties << 'EOF'
systemProp.http.proxyHost=127.0.0.1
systemProp.http.proxyPort=7890
systemProp.https.proxyHost=127.0.0.1
systemProp.https.proxyPort=7890

# å¦‚æœéœ€è¦æ’é™¤æŸäº›åŸŸåä¸èµ°ä»£ç†
systemProp.http.nonProxyHosts=*.google.com|localhost
EOF
```

:::tip æç¤º
è¿™ä¸ªé…ç½®éå¸¸é‡è¦ï¼Œå¦åˆ™ Flutter é¡¹ç›®åœ¨æ„å»º Android åº”ç”¨æ—¶å¯èƒ½æ— æ³•ä¸‹è½½ä¾èµ–ã€‚
:::

### æ¥å— Android è®¸å¯åè®®

```bash
# ç¡®ä¿ä»£ç†å·²è®¾ç½®
export https_proxy=http://127.0.0.1:7890
export http_proxy=http://127.0.0.1:7890

# æ¥å—æ‰€æœ‰ Android SDK è®¸å¯
flutter doctor --android-licenses
```

:::info è¯´æ˜
åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸€è·¯æŒ‰ `y` æ¥å—æ‰€æœ‰è®¸å¯åè®®ã€‚
:::

### å®‰è£… Flutter å’Œ Dart æ’ä»¶

åœ¨ Android Studio ä¸­å®‰è£… Flutter æ’ä»¶ã€‚

#### å®‰è£…æ­¥éª¤

1. æ‰“å¼€ Android Studio
2. **Settings/Preferences** â†’ **Plugins**
3. æœç´¢ **"Flutter"** å¹¶ç‚¹å‡» **Install**
4. Dart æ’ä»¶ä¼šè‡ªåŠ¨å®‰è£…
5. é‡å¯ Android Studio

### é…ç½® Flutter é•œåƒï¼ˆå¯é€‰ï¼‰

å¦‚æœä»£ç†ä¸ç¨³å®šï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿã€‚

```bash
# ä½¿ç”¨æ¸…åé•œåƒåŠ é€Ÿ
cat >> ~/.zshrc << 'EOF'

# Flutter ä¸­å›½é•œåƒ
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
EOF

source ~/.zshrc
```

:::warning æ³¨æ„
å¦‚æœä»£ç†é€Ÿåº¦å¿«ï¼Œå¯ä»¥ä¸é…ç½®é•œåƒã€‚é•œåƒå’Œä»£ç†åŒæ—¶ä½¿ç”¨å¯èƒ½ä¼šæœ‰å†²çªã€‚
:::

### å®‰è£…ä½ç‰ˆæœ¬ java jvm
```sh
# 1. å®‰è£… Java 11
brew install openjdk@11

# 2. æŸ¥çœ‹å·²å®‰è£…çš„ Java ç‰ˆæœ¬
/usr/libexec/java_home -V

# 3. é…ç½®é¡¹ç›®ä½¿ç”¨ Java 11 (åœ¨é¡¹ç›®ä¸­è®¾ç½®)
export JAVA_HOME=$(/usr/libexec/java_home -v 11)

# æˆ–è€…æ°¸ä¹…é…ç½®åœ¨ ~/.zshrc ä¸­:
# echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 11)' >> ~/.zshrc
```

### éªŒè¯å®‰è£…

#### è¿è¡Œ Flutter Doctor

```bash
# æ£€æŸ¥ Flutter ç¯å¢ƒ
flutter doctor -v

# é¢„ä¸‹è½½ä¾èµ–
flutter precache
```

#### æœŸæœ›è¾“å‡º

```
[âœ“] Flutter (Channel stable, 3.7.12, on macOS ...)
[âœ“] Android toolchain - develop for Android devices
[âœ“] Xcode - develop for iOS and macOS
[âœ“] Android Studio
[âœ“] Connected device
[âœ“] Network resources
```

å¦‚æœæ‰€æœ‰é¡¹éƒ½æ˜¾ç¤º âœ“ï¼Œè¯´æ˜ç¯å¢ƒé…ç½®æˆåŠŸï¼

### åˆ›å»ºæµ‹è¯•é¡¹ç›®

#### åˆ›å»ºå¹¶è¿è¡Œ Flutter é¡¹ç›®

```bash
# åˆ›å»ºæ–°é¡¹ç›®
cd ~/Documents/github/test
flutter create test_app
cd test_app

# è·å–ä¾èµ–ï¼ˆä¼šé€šè¿‡ä»£ç†ä¸‹è½½ï¼‰
flutter pub get

# è¿è¡Œé¡¹ç›®ï¼ˆiOS æ¨¡æ‹Ÿå™¨ï¼‰
open -a Simulator  # æ‰“å¼€ iOS æ¨¡æ‹Ÿå™¨
flutter run
```

#### åˆ›å»º Android æ¨¡æ‹Ÿå™¨

åœ¨ Android Studio ä¸­ï¼š
1. **Tools** â†’ **Device Manager**
2. ç‚¹å‡» **Create Device**
3. é€‰æ‹©è®¾å¤‡å‹å·å¹¶åˆ›å»º

### æ•…éšœæ’é™¤

#### ä»£ç†ç›¸å…³é—®é¢˜

å¦‚æœä¸‹è½½å¾ˆæ…¢æˆ–å¤±è´¥ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

```bash
# 1. ç¡®è®¤ä»£ç†æ­£åœ¨è¿è¡Œ
curl -I --proxy http://127.0.0.1:7890 https://www.google.com

# 2. æµ‹è¯•ä»£ç†è¿æ¥
export https_proxy=http://127.0.0.1:7890
curl https://pub.dev

# 3. æ¸…é™¤ Flutter ç¼“å­˜é‡è¯•
flutter clean
rm -rf ~/.pub-cache
flutter pub get
```

#### ä¸´æ—¶å…³é—­ä»£ç†

æŸäº›å‘½ä»¤å¯èƒ½éœ€è¦ä¸´æ—¶å…³é—­ä»£ç†ï¼š

```bash
# å…³é—­ä»£ç†
unset http_proxy
unset https_proxy
unset all_proxy
```

#### é‡æ–°å¯ç”¨ä»£ç†

```bash
# é‡æ–°å¯ç”¨ä»£ç†
export https_proxy=http://127.0.0.1:7890
export http_proxy=http://127.0.0.1:7890
export all_proxy=socks5://127.0.0.1:7890
```

### å®Œæ•´çš„ç¯å¢ƒæ£€æŸ¥

è¿è¡Œä»¥ä¸‹è„šæœ¬æ£€æŸ¥æ‰€æœ‰ç¯å¢ƒé…ç½®ï¼š

```bash
# æ£€æŸ¥æ‰€æœ‰ç¯å¢ƒ
echo "=== Flutter ==="
flutter --version
which flutter

echo -e "\n=== FVM ==="
fvm --version
fvm list

echo -e "\n=== Android SDK ==="
echo $ANDROID_HOME
adb version

echo -e "\n=== Xcode ==="
xcodebuild -version

echo -e "\n=== CocoaPods ==="
pod --version

echo -e "\n=== ä»£ç†è®¾ç½® ==="
echo "HTTP Proxy: $http_proxy"
echo "HTTPS Proxy: $https_proxy"

echo -e "\n=== Flutter Doctor ==="
flutter doctor -v
```

### å¸¸è§é—®é¢˜

#### Q: Flutter doctor æ˜¾ç¤º Android licenses é—®é¢˜ï¼Ÿ

**A**: è¿è¡Œ `flutter doctor --android-licenses` å¹¶ä¸€è·¯æŒ‰ `y` æ¥å—ã€‚

#### Q: ä¸‹è½½ä¾èµ–å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ

**A**: 
1. ç¡®è®¤ä»£ç†æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. æ£€æŸ¥ Gradle ä»£ç†é…ç½®
3. è€ƒè™‘ä½¿ç”¨å›½å†…é•œåƒ

#### Q: Xcode ç›¸å…³é—®é¢˜ï¼Ÿ

**A**: 
1. ç¡®ä¿å·²å®‰è£… Xcode
2. è¿è¡Œ `sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer`
3. è¿è¡Œ `sudo xcodebuild -license accept`

#### Q: Android Studio æ— æ³•ä¸‹è½½ SDKï¼Ÿ

**A**: 
1. æ£€æŸ¥ Android Studio çš„ä»£ç†é…ç½®
2. ç¡®ä¿ä»£ç†å·¥å…·æ­£åœ¨è¿è¡Œ
3. å°è¯•æ‰‹åŠ¨ä¸‹è½½ SDK

### ä¸‹ä¸€æ­¥

ç¯å¢ƒé…ç½®å®Œæˆåï¼Œå¯ä»¥ï¼š
- ğŸ“± å­¦ä¹  Flutter åŸºç¡€çŸ¥è¯†
- ğŸ¨ åˆ›å»ºç¬¬ä¸€ä¸ª Flutter åº”ç”¨
- ğŸ“– é˜…è¯» [Flutter å®˜æ–¹æ–‡æ¡£](https://flutter.dev/docs)
- ğŸ”§ æ¢ç´¢ Flutter DevTools

:::tip æ¨è
å»ºè®®å…ˆå®Œæˆ [Flutter Codelab](https://flutter.dev/docs/get-started/codelab) æ¥ç†Ÿæ‚‰ Flutter å¼€å‘æµç¨‹ã€‚
:::


### xcodeç‰ˆæœ¬åˆ‡æ¢

`brew install xcodesorg/made/xcodes`

```sh
# åˆ—å‡ºæ‰€æœ‰å¯ä¾›å®‰è£…çš„ç‰ˆæœ¬
xcodes list

# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Xcode (éœ€è¦ Apple ID å¯†ç )
xcodes install 15.4

# åˆ—å‡ºæœ¬æœºå·²å®‰è£…çš„ Xcode ç‰ˆæœ¬
xcodes installed

# åˆ‡æ¢åˆ°å·²å®‰è£…çš„æŸä¸ªç‰ˆæœ¬
xcodes select 15.4
```

