# Flutter æ•°æ®ç±»å‹

| å…³é”®å­—       | æ˜¯å¦å¯å˜  | å€¼ä½•æ—¶ç¡®å®š          | ç±»å‹æ˜¯å¦å›ºå®š     | å¸¸è§ç”¨é€”                   |
| --------- | ----- | -------------- | ---------- | ---------------------- |
| `var`     | âœ” å¯å˜  | è¿è¡Œæ—¶            | âœ” ç¬¬ä¸€æ¬¡èµ‹å€¼åå›ºå®š | æ™®é€šå˜é‡                   |
| `final`   | âœ– ä¸å¯å˜ | è¿è¡Œæ—¶ç¡®å®šä¸€æ¬¡        | âœ” å›ºå®š       | è¿è¡Œæ—¶å¸¸é‡ï¼Œå¦‚ DateTime.now() |
| `const`   | âœ– ä¸å¯å˜ | **ç¼–è¯‘æœŸ**å°±å¿…é¡»ç¡®å®š   | âœ” å›ºå®š       | ç¼–è¯‘æœŸå¸¸é‡ï¼Œå¦‚ 1ã€"abc"        |
| `dynamic` | âœ” å¯å˜  | è¿è¡Œæ—¶            | âœ– ä¸å›ºå®š      | ç±»å‹ä¸ç¡®å®šã€åŠ¨æ€ç±»å‹             |
| `late`    | âœ” å¯å˜  | **é¦–æ¬¡ä½¿ç”¨æ—¶** æ‰åˆå§‹åŒ– | âœ” å›ºå®š       | å»¶è¿Ÿåˆå§‹åŒ–å˜é‡ã€é¿å…ä¸€å¼€å§‹æ— æ³•èµ‹å€¼      |


```dart
// --- varï¼šå¯å˜å˜é‡ï¼Œç±»å‹åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼åå›ºå®š ---
var age = 18;
age = 20;          // âœ” å¯ä»¥ä¿®æ”¹
// age = "abc";    // âŒ ç±»å‹åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼åå›ºå®šä¸º int


// --- finalï¼šè¿è¡Œæ—¶ç¡®å®šä¸€æ¬¡ï¼Œä¸å¯é‡æ–°èµ‹å€¼ï¼Œä½†å†…éƒ¨å†…å®¹å¯å˜ ---
final now = DateTime.now();
// now = 123;      // âŒ ä¸å…è®¸é‡æ–°èµ‹å€¼

final list1 = [1, 2, 3];
list1.add(4);       // âœ” å†…éƒ¨å¯å˜
// list1 = [5, 6]; // âŒ ä¸å¯é‡æ–°èµ‹å€¼


// --- constï¼šç¼–è¯‘æœŸå¸¸é‡ï¼Œå®Œå…¨ä¸å¯å˜ï¼ŒåŒ…æ‹¬å†…éƒ¨ ---
const PI = 3.14159;
// const time = DateTime.now(); // âŒ ç¼–è¯‘æœŸæ— æ³•ç¡®å®š

const list2 = [1, 2, 3];
// list2.add(4);              // âŒ å†…éƒ¨ä¹Ÿä¸å¯æ”¹


// --- dynamicï¼šåŠ¨æ€ç±»å‹ï¼Œç±»å‹ä¸å›ºå®šï¼Œå¯ä»¥ä»»æ„ä¿®æ”¹ ---
dynamic x = 10;
x = "hello";   // âœ” å¯å˜
x = true;      // âœ” ä»»æ„ç±»å‹éƒ½è¡Œï¼ˆä¸æ¨èæ»¥ç”¨ï¼‰

// dynamic = å®Œå…¨åŠ¨æ€ç±»å‹ï¼Œè¿è¡Œæ—¶å†³å®šï¼Œä¼šé™ä½ç±»å‹å®‰å…¨


// --- lateï¼šå»¶è¿Ÿåˆå§‹åŒ–ï¼Œåœ¨â€œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶â€æ‰èµ‹å€¼ ---
late String name;
name = "Tom";   // âœ” åˆå§‹åŒ–ï¼ˆå¿…é¡»åœ¨ä½¿ç”¨å‰èµ‹å€¼ï¼‰
print(name);    // ä½¿ç”¨

// late + finalï¼šåªå…è®¸èµ‹å€¼ä¸€æ¬¡ï¼Œä½†å»¶è¿Ÿåˆ°é¦–æ¬¡ä½¿ç”¨å‰
late final int number;
number = 100;   // âœ” å¯ä»¥èµ‹å€¼ä¸€æ¬¡

// late çš„å…¸å‹ç”¨é€”ï¼š
// - ç±»ä¸­éœ€è¦ç­‰æ„é€ å®Œæˆåå†åˆå§‹åŒ–
// - é¿å…æŸäº›å˜é‡ä¸€å¼€å§‹æ²¡æœ‰å€¼
// - æå‡æ€§èƒ½ï¼Œå»¶è¿Ÿå¤§å¯¹è±¡æ„å»º
```

## ğŸ¯ Dart åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ ¸å¿ƒ 6 ä¸ªï¼‰

## 1. **intï¼ˆæ•´æ•°ï¼‰**

```dart
int a = 10;
int b = -3;
```

**å¸¸ç”¨æ–¹æ³•**

```dart
a.isEven;         // æ˜¯å¦å¶æ•°
a.isOdd;          // æ˜¯å¦å¥‡æ•°
a.abs();          // ç»å¯¹å€¼
a.toDouble();     // è½¬ double
```

---

## 2. **doubleï¼ˆå°æ•°ï¼‰**

```dart
double pi = 3.14159;
```

**å¸¸ç”¨æ–¹æ³•**

```dart
pi.toInt();       // è½¬ int
pi.toStringAsFixed(2); // ä¿ç•™ä¸¤ä½å°æ•°
```

## 3. **numï¼ˆint + double éƒ½èƒ½æ”¾ï¼‰**

```dart
num x = 10;
x = 10.5;
```

## 4. **Stringï¼ˆå­—ç¬¦ä¸²ï¼‰**

```dart
String name = "Tom";
String s = 'Hello';
```

**å¸¸ç”¨æ–¹æ³•ï¼ˆéå¸¸å¸¸ç”¨ï¼‰**

```dart
name.length;         // é•¿åº¦
name.contains("o");  // åŒ…å«
name.toUpperCase();  // è½¬å¤§å†™
name.toLowerCase();  // è½¬å°å†™
name.trim();         // å»ç©ºæ ¼
name.split(" ");     // åˆ†å‰²
"123".isEmpty;       // æ˜¯å¦ç©ºå­—ç¬¦ä¸²
```

å­—ç¬¦ä¸²æ‹¼æ¥ï¼š

```dart
var msg = "Hello $name";
var msg2 = "Sum: ${1 + 2}";
```

## 5. **boolï¼ˆå¸ƒå°”ï¼‰**

```dart
bool isOk = true;
isOk = false;
```

## 6. **Listï¼ˆåˆ—è¡¨ / æ•°ç»„ï¼‰**

```dart
List list=[1ï¼Œ2ï¼Œ3ï¼Œ'é›†åˆ']; //åˆå§‹åŒ–æ—¶ï¼Œæ·»åŠ å…ƒç´  ä¸ä½¿ç”¨æ³›å‹
List list4 = List.generate(3,(index)=>index * 2); // æ„é€ å‡½æ•°ç”Ÿæˆ

List<int> nums = [1, 2, 3];
var words = ["a", "b"];
var empty = <String>[];
```

### å¸¸ç”¨æ–¹æ³•

```dart
// å¢åˆ æ”¹æŸ¥
nums.add(4);          // [1,2,3,4]
nums.addAll([5, 6]);  // [1,2,3,4,5,6]

// insert / insertAllï¼ˆæ’å…¥ï¼‰
nums.insert(1, 10);          // åœ¨ç´¢å¼• 1 æ’å…¥ 10
nums.insertAll(2, [7, 8, 9]); // ä»ç´¢å¼• 2 å¼€å§‹æ’å…¥å¤šä¸ª


nums.remove(2);       // åˆ é™¤å€¼ä¸º 2 çš„å…ƒç´ 
nums.removeAt(0);     // åˆ é™¤ä¸‹æ ‡ 0
nums.removeLast();    // åˆ é™¤æœ€åä¸€ä¸ª

nums.clear();

// è®¿é—®ã€åˆ‡ç‰‡
nums.elementAt(2);

// sublistï¼ˆåˆ‡ç‰‡ï¼‰

var part = nums.sublist(1, 4); // ä» 1 ~ 3

// first / last
nums.first;
nums.last;

//éå†
nums.forEach((n) => print(n));

// mapï¼ˆæ˜ å°„ï¼Œè¿”å› Iterableï¼‰
var doubled = nums.map((n) => n * 2).toList();

// whereï¼ˆç­›é€‰ï¼‰
var even = nums.where((n) => n.isEven).toList();

// foldï¼ˆç´¯åŠ /èšåˆï¼‰
var sum = nums.fold(0, (prev, n) => prev + n);

//reduceï¼ˆç±»ä¼¼ foldï¼‰
var sum = nums.reduce((a, b) => a + b);

// expandï¼ˆæ‰å¹³åŒ–ï¼‰
var list = [[1,2], [3,4]];
var flat = list.expand((e) => e).toList(); // [1,2,3,4]

// æŸ¥æ‰¾æ–¹æ³•
nums.indexOf(3);
nums.lastIndexOf(3);

nums.contains(1); // true
nums.any((n) => n > 10);      // æ˜¯å¦æœ‰ä»»æ„å…ƒç´ ç¬¦åˆæ¡ä»¶
nums.every((n) => n > 0);     // æ˜¯å¦æ‰€æœ‰å…ƒç´ ç¬¦åˆæ¡ä»¶

var v = nums.firstWhere((n) => n > 5, orElse: () => -1);

nums.take(2).toList();  // å‰ä¸¤ä¸ª
nums.skip(3).toList();  // è·³è¿‡å‰ä¸‰ä¸ª

// æ’åº
nums.sort(); // é»˜è®¤å‡åº

// è‡ªå®šä¹‰æ’åº
nums.sort((a, b) => b - a); // é™åº

// å¤åˆ¶ / è½¬æ¢
var newList = nums.toList();

// join

nums.join(","); // "1,2,3"

// asMapï¼ˆList è½¬ Mapï¼Œkey ä¸º indexï¼‰
var map = nums.asMap(); // {0:1,1:2,...}

// å…¶ä»–å¸¸ç”¨å±æ€§
nums.length;
nums.isEmpty;
nums.isNotEmpty;
```

### å°ç»“è¡¨æ ¼

| æ–¹æ³•                           | ä½œç”¨             |
| ------------------------------ | ---------------- |
| add / addAll                   | æ·»åŠ å…ƒç´          |
| insert / insertAll             | æ’å…¥å…ƒç´          |
| remove / removeAt / removeLast | åˆ é™¤             |
| sublist                        | åˆ‡ç‰‡             |
| where / map / expand           | ç­›é€‰ã€æ˜ å°„ã€å±•å¼€ |
| sort                           | æ’åº             |
| fold / reduce                  | èšåˆ             |
| indexOf / contains             | æŸ¥æ‰¾             |
| take / skip                    | åˆ†æ®µå–å€¼         |
| asMap                          | è½¬ Map           |
| join                           | æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²     |

---

ä¸å¯å˜ Listï¼š

```dart
const fixed = [1, 2, 3];
```


## Mapï¼ˆå¯¹è±¡ / å­—å…¸ï¼‰

```dart
Map<String, int> scores = {
  "Tom": 90,
  "Lucy": 85,
};

scores["Tom"];   // 90

// è®¾ç½®å€¼ / æ–°å¢é”®å€¼å¯¹
scores["Kate"] = 100;
scores.addAll({"Mike": 88});

// åˆ é™¤é”®å€¼å¯¹
scores.remove("Tom");
scores.removeWhere((key, value) => value < 60); // æŒ‰æ¡ä»¶åˆ 

// åˆ¤æ–­ä¸æ£€æŸ¥

scores.containsKey("Tom");      // æ˜¯å¦å­˜åœ¨æŸä¸ª key
scores.containsValue(90);       // æ˜¯å¦å­˜åœ¨æŸä¸ª value
scores.isEmpty;                 // æ˜¯å¦ä¸ºç©º
scores.isNotEmpty;              // æ˜¯å¦ä¸ä¸ºç©º
scores.length;                  // key-value æ•°é‡

// è®¿é—®æ‰€æœ‰ key / value / entry
scores.keys;       // æ‰€æœ‰ key
scores.values;     // æ‰€æœ‰ value
scores.entries;    // é”®å€¼å¯¹ Entry

// ç¤ºä¾‹ï¼ˆéå† Entryï¼‰
for (var entry in scores.entries) {
  print("${entry.key} : ${entry.value}");
}
scores.forEach((key, value) {
  print("$key => $value");
});

// åˆå¹¶ / æ‹·è´
scores.addAll({"AAA": 1, "BBB": 2});

var updated = scores.map((key, value) {
  return MapEntry(key, value + 5);
});

// è½¬æ¢æ–¹æ³•
var keyList = scores.keys.toList();
var valueList = scores.values.toList();

// entries è½¬ List<MapEntry>
var e = scores.entries.toList();

// putIfAbsentï¼ˆä¸å­˜åœ¨æ—¶æ‰æ·»åŠ ï¼‰
scores.putIfAbsent("John", () => 99);

// updateï¼ˆå­˜åœ¨æ—¶ä¿®æ”¹å€¼ï¼‰
scores.update("Tom", (value) => value + 5);

// updateAllï¼ˆæ‰¹é‡æ›´æ–°ï¼‰
scores.updateAll((key, value) => value + 1);

// åˆ›å»ºä¸€ä¸ª Map å‰¯æœ¬
var copy = Map.from(scores);
var deepCopy = Map.of(scores);

// åˆå¹¶å¤šä¸ª Map
var merged = {...scores, ...{"A": 1, "B": 2}};

// è½¬å­—ç¬¦ä¸²
scores.toString();  // "{Tom: 90, Lucy: 85}"
```

### å°ç»“è¡¨æ ¼

| æ–¹æ³•                          | ä½œç”¨                 |
| --------------------------- | ------------------ |
| `[]` / `[]=`                | è·å–/è®¾ç½®å€¼             |
| addAll                      | åˆå¹¶ Map             |
| remove / removeWhere        | åˆ é™¤                 |
| containsKey / containsValue | æŸ¥æ‰¾                 |
| keys / values / entries     | è·å– keyã€valueã€Entry |
| forEach                     | éå†                 |
| putIfAbsent                 | ä¸å­˜åœ¨æ—¶æ–°å¢             |
| update / updateAll          | æ›´æ–°                 |
| map                         | è½¬æ¢æˆæ–° Map           |
| Map.from / Map.of           | å¤åˆ¶                 |
| æ‰©å±•è¿ç®—ç¬¦ `{...a, ...b}`        | åˆå¹¶ Map             |


## 8. **Setï¼ˆé›†åˆï¼šä¸èƒ½é‡å¤ï¼‰**

```dart
var s = {1, 2, 3};
s.add(3); // åŠ ä¸è¿›å»ï¼Œå·²å­˜åœ¨
```

**å¸¸ç”¨æ–¹æ³•**

```dart
s.contains(2);
s.remove(1);
s.length;
```

# ğŸ§® ç±»å‹æ€»ç»“ä¸€å¥è¯

| ç±»å‹   | ä½œç”¨         |
| ------ | ------------ |
| int    | æ•´æ•°         |
| double | å°æ•°         |
| num    | int + double |
| String | å­—ç¬¦ä¸²       |
| bool   | å¸ƒå°”         |
| List   | æ•°ç»„         |
| Map    | å¯¹è±¡         |
| Set    | ä¸é‡å¤é›†åˆ   |

# ğŸ”¥ Bonusï¼šç±»å‹æ¨æ–­

Dart é€šå¸¸ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼š

```dart
var x = 10;       // int
var y = "hello";  // String
var z = [1, 2, 3]; // List<int>
```
