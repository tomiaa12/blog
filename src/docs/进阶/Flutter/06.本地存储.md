# Flutter æœ¬åœ°å­˜å‚¨

`shared_preferences` æ˜¯ Flutter é‡Œ**æœ€å¸¸ç”¨çš„æœ¬åœ°è½»é‡å­˜å‚¨åº“**ï¼Œç›¸å½“äºç§»åŠ¨ç«¯çš„â€œæœ¬åœ°å°æ•°æ®å­˜å‚¨â€ã€‚é€‚åˆä¿å­˜**ç®€å•çš„å°å‹é”®å€¼å¯¹æ•°æ®**ã€‚

æˆ‘ç”¨ä½ å–œæ¬¢çš„**ç®€å•æ˜“æ‡‚æ–¹å¼**æ¥è§£é‡Šã€‚

# ğŸ“Œ `shared_preferences` æ˜¯ä»€ä¹ˆï¼Ÿ

å®ƒå°±åƒä¸€ä¸ª**å°å‹æœ¬åœ°æ•°æ®åº“ï¼ˆKey â†’ Valueï¼‰**ï¼Œé€‚åˆå­˜ï¼š

- ç™»å½•çŠ¶æ€ï¼ˆisLogin = true/falseï¼‰
- token
- ç”¨æˆ·å / ç”¨æˆ·è®¾ç½®
- ä¸»é¢˜æ¨¡å¼ï¼ˆdark / lightï¼‰
- æ–°æ‰‹å¼•å¯¼æ˜¯å¦å·²å®Œæˆ

ä¸é€‚åˆå­˜ï¼š

- å¤§æ–‡ä»¶
- å¤§é‡ JSON
- å›¾ç‰‡ã€äºŒè¿›åˆ¶æ•°æ®

# ğŸ“¦ å¦‚ä½•ä½¿ç”¨ï¼ˆæœ€å¸¸ç”¨æ–¹å¼ï¼‰

### 1. å®‰è£…ä¾èµ–ï¼ˆpubspec.yamlï¼‰

```yaml
dependencies:
  shared_preferences: ^2.3.2
```

### 2. å¯¼å…¥

```dart
import 'package:shared_preferences/shared_preferences.dart';
```

### 3. ä¿å­˜æ•°æ®ï¼ˆå†™ï¼‰

```dart
final prefs = await SharedPreferences.getInstance();
prefs.setString('token', 'abc123');
prefs.setBool('isLogin', true);
prefs.setInt('age', 18);
```

### 4. è¯»å–æ•°æ®ï¼ˆè¯»ï¼‰

```dart
final prefs = await SharedPreferences.getInstance();
String? token = prefs.getString('token');
bool isLogin = prefs.getBool('isLogin') ?? false;
int? age = prefs.getInt('age');
```

## â“ å¸¸è§ç–‘é—®ï¼ˆæˆ‘æå‰å¸®ä½ å›ç­”ï¼‰

### 1. ğŸ“Œ ä¸ºä»€ä¹ˆè¯»å–æ˜¯å¼‚æ­¥ï¼Ÿ

å› ä¸ºæ•°æ®å­˜åˆ°è®¾å¤‡æœ¬åœ°æ–‡ä»¶ï¼Œéœ€è¦è¯»å– I/Oï¼Œä¸æ˜¯å†…å­˜æ“ä½œï¼Œæ‰€ä»¥æ˜¯ `await`ã€‚

### 2. ğŸ“Œ å’Œæœ¬åœ°æ•°æ®åº“ï¼ˆsqfliteï¼‰åŒºåˆ«ï¼Ÿ

| shared_preferences | sqflite            |
| ------------------ | ------------------ |
| å­˜é”®å€¼å¯¹å°æ•°æ®     | å­˜å¤§é‡ç»“æ„åŒ–æ•°æ®   |
| è½»é‡               | é‡é‡               |
| ç®€å•               | å¤æ‚               |
| é…ç½®ç±»æ•°æ®         | ç”¨æˆ·æ•°æ®ã€è¡¨æ ¼æ•°æ® |

### 3. ğŸ“Œ æ”¯æŒå“ªäº›ç±»å‹ï¼Ÿ

- String
- int
- double
- bool
- List\<String>

ä¸æ”¯æŒ Map æˆ–å¯¹è±¡ã€‚

å¦‚æœè¦å­˜å¯¹è±¡ â†’ **jsonEncode è‡ªå·±è½¬æˆå­—ç¬¦ä¸²**ã€‚

## ğŸ’¡ å­˜å¯¹è±¡ç¤ºä¾‹

```dart
final prefs = await SharedPreferences.getInstance();
final userJson = jsonEncode({
  "name": "Tom",
  "age": 20
});
prefs.setString('user', userJson);
```

è¯»å–ï¼š

```dart
final prefs = await SharedPreferences.getInstance();
final user = jsonDecode(prefs.getString('user')!);
print(user['name']);
```
